{"version":3,"sources":["../src/map_renderer.js"],"names":["link","scope","elem","attrs","ctrl","mapContainer","find","console","log","events","on","render","map","setTimeout","resize","renderingCompleted","GeoLoop","mapCenterMoved","panToMapCenter","legend","panel","showLegend","createLegend","updateRamp","drawLayerFrames"],"mappings":";;;;;;AAEe,WAASA,IAAT,CAAcC,KAAd,EAAqBC,IAArB,EAA2BC,KAA3B,EAAkCC,IAAlC,EAAwC;AACrD,QAAMC,eAAeH,KAAKI,IAAL,CAAU,eAAV,CAArB;AACAC,YAAQC,GAAR,CAAY,0BAAZ;;AAEAJ,SAAKK,MAAL,CAAYC,EAAZ,CAAe,QAAf,EAAyB,YAAM;AAC7BC;AACA,UAAIP,KAAKQ,GAAT,EAAc;AACZC,mBAAW,YAAM;AACfT,eAAKQ,GAAL,CAASE,MAAT;AACD,SAFD,EAEG,GAFH;AAGD;AACDV,WAAKW,kBAAL;AACD,KARD;;AAUA,aAASJ,MAAT,GAAkB;AAChBJ,cAAQC,GAAR,CAAY,oBAAZ;AACA,UAAI,CAACJ,KAAKQ,GAAV,EAAe;AACb;AACAR,aAAKQ,GAAL,GAAW,IAAII,OAAJ,CAAYZ,IAAZ,EAAkBC,aAAa,CAAb,CAAlB,CAAX;AACD;;AAEDD,WAAKQ,GAAL,CAASE,MAAT;;AAEA,UAAIV,KAAKa,cAAT,EAAyBb,KAAKQ,GAAL,CAASM,cAAT;;AAEzB,UAAI,CAACd,KAAKQ,GAAL,CAASO,MAAV,IAAoBf,KAAKgB,KAAL,CAAWC,UAAnC,EAA+CjB,KAAKQ,GAAL,CAASU,YAAT;;AAE/ClB,WAAKmB,UAAL;AACAnB,WAAKQ,GAAL,CAASY,eAAT;AACD;AACF;;qBA9BuBxB,I;;;;AAFjBgB,a","file":"map_renderer.js","sourcesContent":["import GeoLoop from './geoloop';\r\n\r\nexport default function link(scope, elem, attrs, ctrl) {\r\n  const mapContainer = elem.find('.mapcontainer');\r\n  console.log('initialized map renderer');\r\n\r\n  ctrl.events.on('render', () => {\r\n    render();\r\n    if (ctrl.map) {\r\n      setTimeout(() => {\r\n        ctrl.map.resize();\r\n      }, 500);\r\n    }\r\n    ctrl.renderingCompleted();\r\n  });\r\n\r\n  function render() {\r\n    console.log('called into RENDER');\r\n    if (!ctrl.map) {\r\n      // console.log('creating new map');\r\n      ctrl.map = new GeoLoop(ctrl, mapContainer[0]);\r\n    }\r\n\r\n    ctrl.map.resize();\r\n\r\n    if (ctrl.mapCenterMoved) ctrl.map.panToMapCenter();\r\n\r\n    if (!ctrl.map.legend && ctrl.panel.showLegend) ctrl.map.createLegend();\r\n\r\n    ctrl.updateRamp();\r\n    ctrl.map.drawLayerFrames();\r\n  }\r\n}\r\n"]}